webpackJsonp([0],Array(25).concat([function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(2),a=i(29),n=i(32),o=i(47),h=i(37),r=i(75),c=i(49),d=i(76),p=i(77),u=i(78),l=i(79),g=i(80),m=i(81);Object(e.a)(function*(){yield a.d,o.a.on("start",()=>{o.a.canvas.style.backgroundColor="#ffffff";let t=0;o.a.add.actor(new h.a,new r.a([t,400],[256,o.a.height-400]),new r.a([t+=256,340],[128,o.a.height-340]),new r.a([t+=128,400],[448,o.a.height-400]),new r.a([t+=448,416],[64,o.a.height-416],!1),new m.a([t,400],200),new r.a([t+=64,200],[128,o.a.height-200]),new r.a([t+=128,400],[16*Math.ceil((o.a.width-t)/16),o.a.height-400]),new c.a([300,320],n.a.Red),new c.a([680,380],n.a.Green),new c.a([1200,380],n.a.White),new u.a([1400,400],n.a.Green),new g.a([276,340]),new g.a([660,400]),new g.a([1500,400]),new l.a([296,340]),new l.a([988,200]),new l.a([o.a.util.random.integer.from(20).to(230),400]),new l.a([o.a.util.random.integer.from(400).to(700),400]),new l.a([o.a.util.random.integer.from(400).to(700),400]),new l.a([o.a.util.random.integer.from(400).to(700),400]),new l.a([o.a.util.random.integer.from(1100).to(1600),400]),new l.a([o.a.util.random.integer.from(1100).to(1600),400]),new l.a([o.a.util.random.integer.from(1100).to(1600),400]),new d.a([o.a.util.random.integer.from(400).to(700),400]),new d.a([o.a.util.random.integer.from(400).to(700),400]),new d.a([o.a.util.random.integer.from(1100).to(1600),400]),new p.a([o.a.util.random.integer.from(400).to(700),400]),new p.a([o.a.util.random.integer.from(400).to(700),400]),new p.a([o.a.util.random.integer.from(400).to(700),400]),new p.a([o.a.util.random.integer.from(1100).to(1600),400]),new p.a([o.a.util.random.integer.from(1100).to(1600),400]),new p.a([o.a.util.random.integer.from(1100).to(1600),400])).global.colors=new Set([n.a.White])}).on("end",()=>{o.a.reset().play()}).on("resize",()=>{o.a.canvas.style.width=window.innerWidth+"px"}).on("scrollout",()=>{o.a.pause()}).on("scrollin",()=>{o.a.unpause()}).play()})},function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(2),a=i(33),n=i(89),o=i(50),h=i(92),r=i(51),c=i(93),d=i(96);Object(e.a)(function*(){yield a.c,yield n.a,o.a.on("start",()=>{o.a.add.actor(new h.a,new r.a,new c.a,new d.a([224,704]),new d.a([1344,704]),new d.a([1814,709])).add.background(n.c,n.c.copy([1590,5])).add.foreground(n.b,n.b.copy([1590,5]))}).on("end",()=>{o.a.reset().play()}).on("resize",()=>{o.a.canvas.style.width=window.innerWidth+"px"}).on("scrollout",()=>{o.a.pause()}).on("scrollin",()=>{o.a.unpause()}).play()})},function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(2),a=i(46),n=i(100),o=i(52),h=i(106),r=i(107);Object(e.a)(function*(){yield a.b,yield n.b;const[t,s,i]=[[],[],[]],e=[];for(var c=0;c<o.a.width;c+=n.d.dimensions[0]){for(d=-100;d<n.d.dimensions[0];d+=o.a.util.random.integer.from(60).to(80)){const t=[n.e,n.f][o.a.util.random.integer.from(0).to(2)],i=o.a.util.random.integer.from(-220).to(20);s.push(t.copy([c+d,i,i-1e4])),0===o.a.util.random.integer.from(0).to(2)&&e.push(t.copy([c+d,i+620,i+1e4]))}for(var d=0;d<o.a.height;d+=n.d.dimensions[1])t.push(n.d.copy([c,d])),i.push(n.c.copy([c+o.a.util.random.integer.from(0).to(n.d.dimensions[0]),d+o.a.util.random.integer.from(0).to(n.d.dimensions[1])]))}const p=o.a.util.random.integer.from(200).to(o.a.width-200);o.a.on("start",()=>{o.a.add.actor(new h.a,new r.a).add.background(...t,...s,...i,n.a.copy([p,220,-1e3])).add.foreground(...e)}).on("end",()=>{o.a.reset().play()}).on("resize",()=>{o.a.canvas.style.width=window.innerWidth+"px"}).on("scrollout",()=>{o.a.pause()}).on("scrollin",()=>{o.a.unpause()}).play()})},function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i(2),a=i(42),n=i(113),o=i(55),h=i(116),r=i(117);Object(e.a)(function*(){yield a.b,yield n.b,o.a.on("start",()=>{o.a.add.actor(new h.a(a.c,[79,290]),new h.a(a.a,[79,360]),new h.a(a.d,[79,430]),new r.a).add.background(n.a)}).on("end",()=>{o.a.reset().play()}).on("resize",()=>{o.a.canvas.style.width=window.innerWidth+"px"}).on("scrollout",()=>{o.a.pause()}).on("scrollin",()=>{o.a.unpause()}).play()})},function(t,s,i){"use strict";var e=i(35),a=i(57),n=i.n(a),o=i(58),h=i.n(o),r=i(59),c=i.n(r),d=i(60),p=i.n(d),u=i(61),l=i.n(u),g=i(62),m=i.n(g),f=i(63),w=i.n(f),b=i(64),v=i.n(b),y=i(65),x=i.n(y),k=i(66),M=i.n(k),T=i(67),P=i.n(T),A=i(68),F=i.n(A),R=i(69),I=i.n(R),j=i(70),O=i.n(j),S=i(71),E=i.n(S);const W=new e.a(n.a,4);s.a=W;const _=new e.a(h.a,4);s.b=_;const D=new e.a(c.a,4);s.c=D;const C=new e.a(p.a);s.e=C;const L=new e.a(l.a);s.f=L;const q=new e.a(m.a);s.g=q;const B=new e.a(w.a);s.h=B;const G=new e.a(v.a,5);s.i=G;const z=new e.a(x.a,5);s.j=z;const U=new e.a(M.a,8);s.k=U;const Y=new e.a(P.a,17);s.l=Y;const $=new e.a(F.a,2);s.m=$;const H=new e.a(I.a);s.n=H;const J=new e.a(O.a);s.o=J;const K=new e.a(E.a);s.p=K,s.d=Promise.all([W,_,D,C,L,q,B,G,z,U,Y,$,H,J,K].map(({loaded:t})=>t))},function(t,s,i){"use strict";var e=i(36);const a=Object(e.a)("Left","Right","Up","Down","Attack","Defend","Talk");s.a=a;const n=Symbol("KEYFRAME_END");s.b=n},function(t,s,i){"use strict";var e=i(40),a=i(47);s.a=Object(e.a)(a.a)},function(t,s,i){"use strict";i(36);const e={White:16777215,Red:16711680,Green:32768};s.a=e},function(t,s,i){"use strict";var e=i(35),a=i(82),n=i.n(a),o=i(83),h=i.n(o),r=i(84),c=i.n(r),d=i(85),p=i.n(d),u=i(86),l=i.n(u),g=i(87),m=i.n(g),f=i(88),w=i.n(f);const b=new e.a(n.a,5);s.b=b;const v=new e.a(h.a);s.g=v;const y=new e.a(c.a);s.e=y;const x=new e.a(p.a);s.h=x;const k=new e.a(l.a);s.a=k;const M=new e.a(m.a,3);s.f=M;const T=new e.a(w.a);s.d=T,s.c=Promise.all([b,v,y,x,k,M,T].map(({loaded:t})=>t))},function(t,s,i){"use strict";var e=i(40),a=i(50);s.a=Object(e.a)(a.a)},function(t,s,i){"use strict";function e(t,s){const i=t.getContext("2d"),e=i.getImageData(0,0,t.width,t.height),[a,n,o]=[(s>>16&255)/255,(s>>8&255)/255,(255&s)/255];for(var h=0;h<e.data.length;h+=4)e.data[h]*=a,e.data[h+1]*=n,e.data[h+2]*=o;i.clearRect(0,0,t.width,t.height),i.putImageData(e,0,0)}var a=i(6);const[n,o,h,r,c]=a.a;class d{constructor(t,s=1){t&&(this[n]=new Image,this[n].src=t,this[o]=[0,0],this[h]=new Promise((t,i)=>{this[n].onload=(()=>{this[o]=[Math.floor(this[n].width/s),this[n].height],t()}),this[n].onerror=i}),this[r]=new Map([[16777215,this]]))}get frames(){if(window.Proxy)return new Proxy(this,{get:(t,s)=>"length"===s?t[n].width/t[o][0]:[t[o][0]*(s%(t[n].width/t[o][0])),0,...t[o]]});{const s=[];for(var t=0;t<this[n].width/this[o][0];++t)s.push([this[o][0]*(t%(this[n].width/this[o][0])),0,...this[o]]);return s}}get dimensions(){return this[o]}get image(){return this[n]}get loaded(){return this[h]}addBlend(t){if(!this[r].has(t)){const s=document.createElement("canvas");s.width=this[n].width,s.height=this[n].height,s.style.display="none",s.style.width=`${s.width}px`,s.style.height=`${s.height}px`;const i=s.getContext("2d");i.clearRect(0,0,s.width,s.height),i.drawImage(this[r].get(16777215)[n],0,0),e(s,t),this[r].set(t,new p(s,this[c]||this))}}blend(t){return this[r].get(t)}draw(t,s,i,e,a=this[o][0],h=this[o][1],r=1,c=1){t.save(),t.scale(...[r,c].map(Math.sign)),t.drawImage(this[n],...this.frames[s],Math.floor(i),Math.floor(e),Math.floor(a)*Math.abs(r),Math.floor(h)*Math.abs(c)),t.restore()}drawRotated(t,s,i,e,a,h=this[o][0]/2,r=this[o][1]/2,c=this[o][0],d=this[o][1],p=1,u=1){t.save(),t.translate(Math.floor(i),Math.floor(e)),t.rotate(a*Math.PI/180),t.scale(...[p,u].map(Math.sign)),t.drawImage(this[n],...this.frames[s],-Math.floor(h),-Math.floor(r),Math.floor(c)*Math.abs(p),Math.floor(d)*Math.abs(u)),t.restore()}}class p extends d{constructor(t,s){super(null,s.frames.length),this[c]=s,this[n]=t}get frames(){return this[c].frames}get dimensions(){return this[c].dimensions}get loaded(){return this[c].loaded}get image(){return this[n]}blend(t){return this[c].blend(t)}addBlend(t){return this[c].addBlend(t)}}s.a=d},function(t,s,i){"use strict";s.a=((...t)=>{if(-1!==t.indexOf("length"))throw new Error('Cannot create an enumerator with key "length"');let s=0;const i=t.reduce((t,i)=>(t[i]=s++,t),{});return i.length=s,i[Symbol.iterator]=function*(){for(var s of t)yield i[s]},i})},function(t,s,i){"use strict";var e=i(31),a=i(30),n=i(29),o=i(43),h=i(49),r=i(74);class c extends e.a{constructor(){super(n.j),this.haxis=0,this.hsp=0,this.vsp=0,this.subimage=2,this.position=[32,400,1],this.origin[1]=this.sprite.dimensions[1]}react(t){switch(t){case a.a.Left:this.haxis-=1;break;case a.a.Right:this.haxis+=1;break;case a.a.Up:this.vsp=-6}}update(){0!==this.haxis&&(0===this.hsp&&0===this.vsp&&this.game.add.actor(new r.a([this.position[0]-8*this.haxis,this.position[1]],-this.haxis)),this.hsp+=1*this.haxis),this.haxis!==Math.sign(this.hsp)&&(this.hsp-=Math.sign(this.hsp)*Math.min(Math.abs(this.hsp),1),Math.abs(this.hsp)<1&&(this.hsp=0)),this.hsp=Math.max(-3,Math.min(this.hsp,3));const t=this.game.util.collision.between(this).at([this.x,this.y+this.vsp+1]).and(o.a);t?(this.position[1]=t.position[1],0!==this.vsp&&(this.game.add.actor(new r.a([this.position[0]-8,this.position[1]],-1),new r.a([this.position[0]+8,this.position[1]],1)),this.vsp=0)):this.vsp=Math.max(Math.min(this.vsp+.25,10),-10),(this.hsp||this.vsp)&&(this.position[0]+=this.hsp,this.position[1]+=this.vsp);const s=10*Math.floor(2*Math.sqrt(Math.pow(this.vsp,2)+Math.pow(this.hsp,2)));this.blend=16777215-65793*s,this.subimage=Math.floor(Math.abs(this.hsp/1.5))*Math.sign(this.hsp)+2;const i=this.game.util.collision.between(this).and(h.a);i&&i.useColor(),this.haxis=0}}s.a=c},function(t,s,i){"use strict";var e=i(6),a=i(2),n=i(30),o=i(72),h=i(0);let r=0;const[c,d,p,u,l,g,m,f,w,b,v,y,x]=e.a;class k{constructor(t,s){this[c]=t,this[d]=t.getContext("2d"),this[u]=!1,this[l]=null,this[g]=null,this[f]=s,this[w]=[],this[b]=[],this[v]=[],this[y]=!1,this[p]={},this[x]={},Object(h.a)(()=>this.trigger("resize"));const i=()=>{const t=this[c].getBoundingClientRect();return t.bottom>=0&&t.top<(window.innerHeight||document.documentElement.clientHeight)};let e;this[m]=i(),window.addEventListener("scroll",()=>{e&&clearTimeout(e),e=setTimeout(()=>{e=void 0,i()!=this[m]&&(this[m]=!this[m],this[m]?this.trigger("scrollin"):this.trigger("scrollout"))},50)})}play(){this.trigger(this[m]?"scrollin":"scrollout"),r++;let t=0;this[y]=!0,this.trigger("start");const s=i=>{if(!this[y])return;const e=this[f].get(t++);if(this[u]||e.has(n.b))return this[u]=!1,this[y]=!1,void this.trigger("end");this[w]=this[w].sort(({position:[,,t]},{position:[,,s]})=>t-s),this[d].clearRect(0,0,this[c].width,this[c].height);for(var o of this[w])e.forEach(o.react.bind(o));for(var o of this[w])o.update();this.trigger("step");const h=[].concat(this[b],this[v],this[w]).sort(({position:[,,t]},{position:[,,s]})=>t-s);for(var r of h)r.draw(this[d]);this[l]?Object(a.a)(function*(){yield this[l],window.requestAnimationFrame(s)},this):window.requestAnimationFrame(s)};window.requestAnimationFrame(s)}end(){this[u]=!0,this[l]&&(this[g](),this[l]=this[g]=null)}pause(){this[l]||(this.trigger("pause"),this[l]=new Promise(t=>{this[g]=(()=>{this[l]=null,this.trigger("unpause"),t()})}))}unpause(){this[l]&&this[g]()}reset(){return this[w]=[],this[b]=[],this[v]=[],this[y]=!1,this[u]=!1,this[l]&&(this[g](),this[l]=this[g]=null),this}get actors(){return this[w]}get foregrounds(){return this[v]}get backgrounds(){return this[b]}get width(){return this[c].width}get height(){return this[c].height}get canvas(){return this[c]}get global(){return this[x]}get add(){return{actor:(...t)=>(this.actors.push(...t),this),foreground:(...t)=>(this.foregrounds.push(...t),this),background:(...t)=>(this.backgrounds.push(...t),this)}}on(t,s){return this[p][t]=this[p][t]?[...this[p][t],s]:[s],this}trigger(t){for(var s of this[p][t]||[])s.bind(this)()}get util(){return new o.a(this)}}s.a=k},function(t,s,i){"use strict";var e=i(6),a=i(30);const[n,o,h]=e.a;class r{constructor(){this[h]=[]}frame(t,s,i=s){return t*=60,this[h][Math.floor(t)]=[s,i],this}end(t){return t*=60,this[h][Math.floor(t)]=[[a.b],[]],this}get(t){t=Math.floor(t);const s=Object.keys(this[h]).map(t=>+t);let i=[];for(var e of s){if(e>=t){e===t&&(i=(i=this[h][e])[0].concat(i[1]));break}i=this[h][e][1]}return new Set(i)}}s.a=r},function(t,s,i){"use strict";var e=i(6),a=i(35);const[n,o,h,r,c,d]=e.a;let p;s.a=(t=>p=class{constructor(s){this[h]=t,this.sprite=s,this.position=[0,0,0],this.subimage=0,this.blend=16777215,this.origin=[0,0],this.alpha=1,this.sprite&&(this.origin=[this.sprite.dimensions[0]/2,this.sprite.dimensions[1]/2]),this.scale=[1,1]}react(t){}update(){}destroy(){const t=this.game.actors.indexOf(this);this.game.actors.splice(t,1)}draw(t){this.sprite&&(t.globalAlpha=this.alpha,this.sprite.blend(this.blend).draw(t,this.subimage,Math.sign(this.scale[0])*this.x-this.origin[0],Math.sign(this.scale[1])*this.y-this.origin[1],this.sprite.dimensions[0],this.sprite.dimensions[1],...this.scale),t.globalAlpha=1)}get x(){return this[o][0]}set x(t){this[o][0]=t}get y(){return this[o][1]}set y(t){this[o][1]=t}get z(){return this[o][2]}set z(t){this[o][2]=t}get origin(){return this[r]}set origin(t){if(!Array.isArray(t))throw new TypeError("Origin must be an array");this[r]=t}get position(){return this[o]}set position(t){if(!Array.isArray(t))throw new TypeError("Position must be an array");for(this[o]=t;this[o].length<3;)this[o].push(0)}get blend(){return this[c]}set blend(t){"number"==typeof t?this[c]=t:"#"===t[0]?this[c]=parseInt(t.slice(1),16):"rgb"===t.slice(0,3).toLowerCase()&&(this[c]=t.slice(4,-1).split(",").map(t=>parseInt(t,10)).reduce((t,s)=>t<<2+s,0)),this.sprite&&this.sprite.addBlend(this.blend)}get sprite(){return this[n]}set sprite(t){if(!(t instanceof a.a||null===t||void 0===t))throw new TypeError("Cannot set sprite to something that is not a Sprite");this[n]=t}get subimage(){return this[d]}set subimage(t){let s=1;this.sprite&&(s=this.sprite.frames.length),this[d]=t%s}get dimensions(){return this.sprite?this.sprite.dimensions:[0,0]}get game(){return t}})},function(t,s,i){"use strict";var e=i(6);const[a,n,o]=e.a;class h{constructor(t,s=[0,0,-1e6]){this.position=s,this[a]=new Image,this[a].src=t,this[o]=new Promise((t,s)=>{this[a].onload=t,this[a].onerror=s})}draw(t){t.drawImage(this[a],...this[n].slice(0,2))}get loaded(){return this[o]}get position(){return this[n]}set position(t){if(!Array.isArray(t))throw new TypeError("Position must be an array");for(this[n]=t;this[n].length<3;)this[n].push(2===this[n].length?-1e6:0)}get dimensions(){return[this[a].width,this[a].height]}copy(t=this[n]){return new this.constructor(this[a].src,t)}}s.a=h},function(t,s,i){"use strict";var e=i(35),a=i(108),n=i.n(a),o=i(109),h=i.n(o),r=i(110),c=i.n(r),d=i(111),p=i.n(d),u=i(112),l=i.n(u);const g=new e.a(n.a);s.a=g;const m=new e.a(h.a);s.c=m;const f=new e.a(c.a);s.d=f;const w=new e.a(p.a);s.e=w;const b=new e.a(l.a);s.f=b,s.b=Promise.all([g,m,f,w,b].map(({loaded:t})=>t))},function(t,s,i){"use strict";var e=i(31);class a extends e.a{}s.a=a},function(t,s,i){"use strict";var e=i(41);class a extends e.a{constructor(t,s=[0,0,1e6]){for(;s.length<3;)s.push(2===s.length?1e6:0);super(t,s)}get position(){return super.position}set position(t){if(!Array.isArray(t))throw new TypeError("Position must be an array");for(;t.length<3;)t.push(2===t.length?1e6:0);super.position=t}}s.a=a},function(t,s,i){"use strict";var e=i(30),a=i(39);const n={Transform:Symbol(),Die:Symbol(),Attack:Symbol()};s.a=n,s.b=(new a.a).frame(0,[e.a.Right]).frame(2,[n.Transform],[]).frame(3,[e.a.Attack],[]).frame(3.6,[e.a.Attack],[]).frame(4.2,[n.Attack],[e.a.Defend]).frame(5.2,[e.a.Attack],[]).frame(5.6,[e.a.Attack,n.Die],[]).frame(6.1,[e.a.Right]).end(10)},function(t,s,i){"use strict";var e=i(35),a=i(97),n=i.n(a),o=i(98),h=i.n(o),r=i(99),c=i.n(r);const d=new e.a(n.a,4);s.a=d;const p=new e.a(h.a,4);s.c=p;const u=new e.a(c.a,4);s.d=u,s.b=Promise.all([d,p,u].map(({loaded:t})=>t))},function(t,s,i){"use strict";var e=i(38),a=i(48);const n=document.querySelector("#white");n.width=1800,n.height=480,setTimeout(()=>n.style.width=(window.IS_MOBILE?screen.width:window.innerWidth)+"px"),s.a=new e.a(n,a.b)},function(t,s,i){"use strict";var e=i(30),a=i(39);const n={Elevator:Symbol()};s.a=n,s.b=(new a.a).frame(1,[e.a.Right]).frame(1.8,[]).frame(2.5,[e.a.Up],[e.a.Right]).frame(6.3,[]).frame(6.5,[n.Elevator]).frame(8,[e.a.Right,n.Elevator]).frame(8.5,[e.a.Right]).frame(11.05,[]).end(11.5)},function(t,s,i){"use strict";var e=i(73),a=i(31),n=i(29);class o extends a.a{constructor(t,s){super(n.l),this.blend=this.color=s,this.position=t,this.imageTimer=4}update(){--this.imageTimer||(++this.subimage,this.imageTimer=4)}useColor(){this.game.global.colors.add(this.color),this.game.canvas.style.backgroundColor=`#${Object(e.a)(this.color.toString(16),"0",6)}`}}s.a=o},function(t,s,i){"use strict";var e=i(38),a=i(45);const n=document.querySelector("#forks");n.width=1800,n.height=800,setTimeout(()=>n.style.width=(window.IS_MOBILE?screen.width:window.innerWidth)+"px",0),s.a=new e.a(n,a.b)},function(t,s,i){"use strict";var e=i(36),a=i(34),n=i(30),o=i(33);const h=Object(e.a)("Idle","Walk1","Walk2","Attack","Defend");class r extends a.a{constructor(){super(o.b),this.attacking=0,this.defending=!1,this.hsp=0,this.vsp=0,this.animationTimer=7.5,this.walkFrame=0,this.position=[0,470]}react(t){switch(t){case n.a.Right:this.hsp=6;break;case n.a.Attack:this.attacking||(this.attacking=14);break;case n.a.Defend:this.defending=!0,this.attacking=0}}update(){this.attacking?(this.attacking>2?this.subimage=h.Attack:this.subimage=h.Idle,--this.attacking):this.defending?this.subimage=h.Defend:this.hsp||this.vsp?(this.position[0]+=this.hsp,this.position[1]+=this.vsp,this.subimage=1+this.walkFrame,Math.floor(--this.animationTimer)||(this.walkFrame=1-this.walkFrame,this.animationTimer+=7.5),this.scale[0]=Math.sign(this.hsp)||this.scale[0]):this.subimage=h.Idle,this.hsp=this.vsp=0,this.defending=!1}draw(t){if(this.attacking>2)if(1===this.scale[0]){const s=[this.position[0]+112,this.position[1]+9];o.d.drawRotated(t,0,...s,90)}else{const s=[this.position[0]-112,this.position[1]+9];o.d.drawRotated(t,0,...s,270)}super.draw(t)}}s.a=r},function(t,s,i){"use strict";var e=i(38),a=i(53);const n=document.querySelector("#abby-and-elliot");n.width=1800,n.height=640,setTimeout(()=>n.style.width=(window.IS_MOBILE?screen.width:window.innerWidth)+"px",0),s.a=new e.a(n,a.b)},function(t,s,i){"use strict";var e=i(30),a=i(39);const n={Monster:Symbol()};s.a=n,s.b=(new a.a).frame(0,[e.a.Right]).frame(4,[e.a.Talk]).frame(5,[n.Monster],[e.a.Talk]).frame(6,[]).frame(6.5,[e.a.Left]).end(10)},function(t,s,i){"use strict";var e=i(40),a=i(52);s.a=Object(e.a)(a.a)},function(t,s,i){"use strict";var e=i(38),a=i(115);const n=document.querySelector("#tokaido");n.width=1800,n.height=570,setTimeout(()=>n.style.width=(window.IS_MOBILE?screen.width:window.innerWidth)+"px"),s.a=new e.a(n,a.a)},function(t,s,i){"use strict";var e=i(40),a=i(55);s.a=Object(e.a)(a.a)},function(t,s,i){t.exports=i.p+"images/2b646b356de38cdcb75ba1695e940858.png"},function(t,s,i){t.exports=i.p+"images/60a1df11cb235d187145765e929735e0.png"},function(t,s,i){t.exports=i.p+"images/b64b8c012b47364bea2dafbe6c2d6c7b.png"},function(t,s,i){t.exports=i.p+"images/53e55ac0753640617609a05925158908.png"},function(t,s,i){t.exports=i.p+"images/dc28ae004fea1dc653faed5069e1b3b2.png"},function(t,s,i){t.exports=i.p+"images/97d1fab5a1575ac3485f32f55f86c6bf.png"},function(t,s,i){t.exports=i.p+"images/12ef00437441aa5d350363e0e91f39a8.png"},function(t,s,i){t.exports=i.p+"images/ad7d53c4c2479f362195cc10bf68371a.png"},function(t,s,i){t.exports=i.p+"images/954c63d9316ee7add4a07f777bc5f909.png"},function(t,s,i){t.exports=i.p+"images/0192467cfa9e012b0cef676c782c0213.png"},function(t,s,i){t.exports=i.p+"images/c2e51274cad2b532aff9bffd3204f049.png"},function(t,s,i){t.exports=i.p+"images/ab76307f4409a8e93ce02b36e05fa13c.png"},function(t,s,i){t.exports=i.p+"images/de122a472d877eaefcc2cd06b1f5dc65.png"},function(t,s,i){t.exports=i.p+"images/79686be681b2776136009e42303a4fca.png"},function(t,s,i){t.exports=i.p+"images/267ff55bc48cf0d8fd55bad3e295ba94.png"},function(t,s,i){"use strict";var e=i(6);const[a,n,o,h,r,c,d,p,u,l,g,m]=e.a;class f extends Function{constructor(t){super("...args",`return this.execute(...args);`),this[a]=t,this[o]="",this[h]=null,this[r]=new Set}get to(){return this}get and(){return this}get distance(){return this[o]=c,this}get direction(){return this[o]=d,this}get random(){return this[o]=p,this}get collision(){return this[o]=u,this}get integer(){return this[r].add("integer"),this}at(t){return this[r].add("at"),this[g]=this[m](t),this}between(t){return this[h]=t,this}from(t){return this[h]=t,this}execute(...t){return this[this[o]](...t)}[c](t){return this[h]=this[m](this[h]),t=this[m](t),Math.sqrt(Math.pow(this[h][0]-t[0],2)+Math.pow(this[h][1]-t[1],2))}[d](t){return this[h]=this[m](this[h]),t=this[m](t),Math.atan2(t[1]-this[h][1],t[0]-this[h][0])}[p](t){const s=Math.random()*(t-this[h])+this[h];return this[r].has("integer")?Math.floor(s):s}[u](t){const s=[[],[]];switch(typeof this[h]){case"function":s[0]=this[a].actors.filter(t=>t instanceof this[h]);break;case"object":s[0].push(this[h])}switch(typeof t){case"function":s[1]=this[a].actors.filter(s=>s instanceof t);break;case"object":s[1].push(t)}for(var i of s[0])for(var e of s[1]){let{position:t,origin:s,dimensions:a}=i,{position:n,origin:o,dimensions:h}=e;this[r].has("at")&&this[g]&&(t=this[g]),t=[t[0]-s[0],t[1]-s[1]],n=[n[0]-o[0],n[1]-o[1]];const c=t[0]<n[0]+h[0]&&t[0]+a[0]>n[0],d=t[1]<n[1]+h[1]&&t[1]+a[1]>n[1];if(c&&d)return e}return!1}[m](t){switch(typeof t){case"function":t=this[a].actors.find(s=>s instanceof t).position;break;case"object":t.position&&(t=t.position)}return t}}s.a=f},function(t,s,i){"use strict";s.a=((t,s,i,e=!1)=>{for(;t.length<i;)e?t+=s[0]:t=s[0]+t;return t})},function(t,s,i){"use strict";var e=i(31),a=i(29);class n extends e.a{constructor(t,s){super(a.k),1===s&&(this.subimage=4),this.position=t,this.imageTimer=4,this.origin[1]=this.sprite.dimensions[1]}update(){--this.imageTimer||(this.imageTimer=4,++this.subimage,4!==this.subimage&&0!==this.subimage||this.destroy())}}s.a=n},function(t,s,i){"use strict";var e=i(6),a=i(43),n=i(32),o=i(29);const[h]=e.a;class r extends a.a{constructor(t,s,i=!0){if(super(),this.position=[...t,-10],this[h]=s,this.grass=[],i)for(;this.grass.length<this.dimensions[0]/o.i.dimensions[0];)this.grass.push(this.game.util.random.integer.between(0).and(5))}get dimensions(){return this[h]}draw(t){if(t.fillStyle="#ffffff",t.fillRect(...this.position.slice(0,2),...this.dimensions),this.game.global.colors.has(n.a.Green))for(var s=0;s<this.grass.length;++s)o.i.draw(t,this.grass[s],this.position[0]+s*o.i.dimensions[0],this.position[1]-o.i.dimensions[1])}}s.a=r},function(t,s,i){"use strict";var e=i(6),a=i(31),n=i(37),o=i(29),h=i(32);const[r]=e.a;class c extends a.a{constructor(t){super(o.a),this.position=t,this.origin=[this.sprite.dimensions[0]/2,this.sprite.dimensions[1]],this.color=[h.a.Red,h.a.Green,h.a.White][this.game.util.random.integer.from(0).to(3)],this.hsp=0,this.vsp=0}get player(){return this[r]||(this[r]=this.game.actors.find(t=>t instanceof n.a))}update(){this.sprite===o.a?(0===this.game.util.random.integer.from(0).to(90)&&(this.imageTimer=6),this.game.util.distance.from(this).to(this.player)<32&&(this.vsp=-2,this.hsp=1,this.sprite=o.b,this.imageTimer=6)):(this.position[0]+=this.hsp,this.position[1]+=this.vsp,this.position[1]<0&&this.destroy()),this.imageTimer&&(--this.imageTimer,this.imageTimer||(++this.subimage,this.sprite===o.a&&0===this.subimage?this.subimage=0:this.imageTimer=6)),this.game.global.colors.has(this.color)&&(this.blend=this.color)}}s.a=c},function(t,s,i){"use strict";var e=i(6),a=i(31),n=i(29),o=i(32),h=i(37);const[r]=e.a;class c extends a.a{constructor(t){super(n.c),this.position=t,this.startPosition=[...this.position],this.color=[o.a.Red,o.a.Green,o.a.White][this.game.util.random.integer.between(0).and(3)],this.imageTimer=3,this.moveTimer=4}get player(){return this[r]||(this[r]=this.game.actors.find(t=>t instanceof h.a))}update(){if(--this.imageTimer||(this.imageTimer=3,++this.subimage),!--this.moveTimer){this.moveTimer=4;let[t,s,i,e]=[-2,2,-2,2];if(this.game.util.distance.from(this).to(this.player)<48){const[a,n]=[this.x-this.player.position[0],this.y-this.player.position[1]];Math.abs(a)<Math.abs(n)?a>0?(t+=3,s+=3):(t-=3,s-=3):n>0?(i+=3,e+=3):(i-=3,e-=3)}else if(this.game.util.distance.from(this).to(this.startPosition)>=32){const[a,n]=[this.x-this.startPosition[0],this.y-this.startPosition[1]];Math.abs(a)>24&&(a>0?s-=3:t+=3),Math.abs(n)>24&&(n>0?e-=3:i+=3)}this.x+=this.game.util.random.integer.between(t).and(s),this.y+=this.game.util.random.integer.between(i).and(e)}this.game.global.colors.has(this.color)&&(this.blend=this.color)}}s.a=c},function(t,s,i){"use strict";var e=i(6),a=i(31),n=i(29),o=i(37);const[h]=e.a;class r extends a.a{constructor(t,s){super(n.e),this.position=t,this.color=s,this.origin[1]=this.sprite.dimensions[1]}get player(){return this[h]||(this[h]=this.game.actors.find(t=>t instanceof o.a))}update(){this.alpha=this.game.util.collision.between(this).and(this.player)?this.alpha+.1:this.alpha-.1,this.alpha=Math.max(.5,Math.min(this.alpha,1)),this.game.global.colors.has(this.color)&&(this.blend=this.color)}draw(t){this.blend===this.color&&super.draw(t)}}s.a=r},function(t,s,i){"use strict";var e=i(31),a=i(29),n=i(32);class o extends e.a{constructor(t){super(a.h),this.position=t,this.position[2]=-1,this.origin[1]=this.sprite.dimensions[1]}update(){this.game.global.colors.has(n.a.Green)?this.sprite=a.f:this.game.global.colors.has(n.a.Red)&&(this.sprite=a.g)}}s.a=o},function(t,s,i){"use strict";var e=i(31),a=i(29),n=i(32);class o extends e.a{constructor(t){super(a.p),this.position=t,this.position[2]=-1,this.origin[1]=this.sprite.dimensions[1]}update(){this.game.global.colors.has(n.a.Green)?this.sprite=a.n:this.game.global.colors.has(n.a.Red)&&(this.sprite=a.o)}}s.a=o},function(t,s,i){"use strict";var e=i(6),a=i(43),n=i(29),o=i(32),h=i(48),r=i(37);const[c]=e.a;class d extends a.a{constructor(t,s){super(n.m),this.position=t,this.origin[0]=0,this.ystart=this.y,this.vdist=s,this.sparks=[]}get player(){return this[c]||(this[c]=this.game.actors.find(t=>t instanceof r.a))}react(t){t===h.a.Elevator&&this.game.util.collision.between(this).and(this.player)&&(this.active=!0)}update(){this.active?(this.y>this.ystart-this.vdist?(this.y-=2,this.player.y-=2,this.sparks.unshift([this.game.util.random.integer.between(this.x).and(this.x+this.dimensions[0]),this.y+16])):this.sparks=[],this.subimage=1,this.active=!1):(this.subimage=0,this.y<this.ystart?(this.y+=2,this.sparks.unshift([this.game.util.random.integer.between(this.x).and(this.x+this.dimensions[0]),this.y])):this.sparks=[]),this.sparks.length>16&&(this.sparks=this.sparks.slice(0,16))}draw(t){super.draw(t),this.game.global.colors.has(o.a.Green)&&1===this.subimage?t.fillStyle="#008000":this.game.global.colors.has(o.a.Red)?t.fillStyle="#FF0000":t.fillStyle="#FFFFFF",t.beginPath(),t.arc(this.x+32,this.y,2,0,2*Math.PI),t.fill(),t.fillStyle="#FFFFFF";for(var s of this.sparks)t.fillRect(...s,1,1)}}s.a=d},function(t,s,i){t.exports=i.p+"images/b4f3f899e20ab6e1be44422d6a73585e.png"},function(t,s,i){t.exports=i.p+"images/26eb12cbbcef8fee73fbeac63b1e40a4.png"},function(t,s,i){t.exports=i.p+"images/52cb2350adf1f5105c8fa37eb443e435.png"},function(t,s,i){t.exports=i.p+"images/7158dc139b17d9087673d234f164a530.png"},function(t,s,i){t.exports=i.p+"images/30121a7952e2e705d6149a149e2ed0c1.png"},function(t,s,i){t.exports=i.p+"images/9e1c8a7f3e467f3ddbe2487e735f2bf9.png"},function(t,s,i){t.exports=i.p+"images/d40afc8f031f80c7859dff750d8e722e.png"},function(t,s,i){"use strict";var e=i(41),a=i(44),n=i(90),o=i.n(n),h=i(91),r=i.n(h);const c=new e.a(o.a);s.c=c;const d=new a.a(r.a);s.b=d,s.a=Promise.all([c,d].map(({loaded:t})=>t))},function(t,s,i){t.exports=i.p+"images/6b27f874fea7b89fa33f02b888f2634d.png"},function(t,s,i){t.exports=i.p+"images/e062d2f9636883206a34378bc2d068e3.png"},function(t,s,i){"use strict";var e=i(34),a=i(33);class n extends e.a{constructor(){super(a.e),this.position=[a.e.dimensions[0],0,-1000001]}update(){this.position[0]-=5,this.position[0]<=0&&(this.position[0]+=a.e.dimensions[0])}draw(t){a.e.draw(t,0,this.position[0],this.position[1],...a.e.dimensions),a.e.draw(t,0,this.position[0]-a.e.dimensions[0],this.position[1],...a.e.dimensions),a.e.draw(t,0,this.position[0]+a.e.dimensions[0],this.position[1],...a.e.dimensions)}}s.a=n},function(t,s,i){"use strict";var e=i(34),a=i(33),n=i(45),o=i(94);class h extends e.a{constructor(t){super(a.g),this.position=[1e3,470],this.transforming=0}react(t){t===n.a.Transform&&(this.transforming=30)}update(){this.transforming&&(--this.transforming,this.transforming%4==0&&(this.sprite===a.f?this.sprite=a.g:this.sprite=a.f),0===this.transforming&&(this.game.actors.push(new o.a(this.position)),this.destroy()))}}s.a=h},function(t,s,i){"use strict";var e=i(36),a=i(34),n=i(51),o=i(33),h=i(45),r=i(30),c=i(95);const d=Object(e.a)("Walk1","Walk2","Attack");class p extends a.a{constructor(t){super(o.f),this.position=t,this.animationTimer=7.5,this.walkFrame=0,this.knock=0,this.attacking=0}react(t){switch(t){case h.a.Attack:this.attacking=60;break;case h.a.Die:for(var s=0;s<5;++s)this.game.actors.push(new c.a([this.position[0],this.position[1]+100]));this.destroy();break;case r.a.Attack:this.knock||(this.knock=10)}}update(){const t=-Math.sign(Math.abs(this.game.util.direction.from(this).to(n.a))-Math.PI/2);this.knock?(this.position[0]-=t*this.knock,--this.knock):this.attacking?(this.subimage=d.Attack,--this.attacking):(Math.floor(--this.animationTimer)||(this.walkFrame=1-this.walkFrame,this.animationTimer+=7.5),this.subimage=this.walkFrame,t&&(this.scale[0]=-t),this.position[0]+=2*t)}}s.a=p},function(t,s,i){"use strict";var e=i(34),a=i(33);class n extends e.a{constructor(t){super(a.a),this.position=t,this.hsp=Math.floor(3*Math.random()+3),this.vsp=-4,this.deltaY=Math.floor(10*Math.random())}update(){this.position[0]+=this.hsp,this.position[1]+=this.vsp,this.vsp+=.5,this.position[1]>=630-this.deltaY&&(this.vsp=-this.vsp/2,this.hsp?this.hsp-=Math.min(this.hsp,1):this.vsp=0)}}s.a=n},function(t,s,i){"use strict";var e=i(34),a=i(33);class n extends e.a{constructor(t){super(a.h),this.position=[...t,500],this.angle=0}update(){this.angle+=3}draw(t){a.h.drawRotated(t,0,...this.position.slice(0,2),this.angle)}}s.a=n},function(t,s,i){t.exports=i.p+"images/d87523348cf1169db095db58ee4d24fb.png"},function(t,s,i){t.exports=i.p+"images/ddc60b1072e747f041f3fc58650ffeee.png"},function(t,s,i){t.exports=i.p+"images/8e31b85c1a09135f10b629a42b5d0c3e.png"},function(t,s,i){"use strict";var e=i(41),a=(i(44),i(101)),n=i.n(a),o=i(102),h=i.n(o),r=i(103),c=i.n(r),d=i(104),p=i.n(d),u=i(105),l=i.n(u);const g=new e.a(n.a);s.a=g;const m=new e.a(h.a);s.e=m;const f=new e.a(c.a);s.f=f;const w=new e.a(p.a);s.d=w;const b=new e.a(l.a);s.c=b,s.b=Promise.all([g,m,f,w,b].map(({loaded:t})=>t))},function(t,s,i){t.exports=i.p+"images/67d23fc1516eef8f0dc3e3d77854028b.png"},function(t,s,i){t.exports=i.p+"images/89e550c670d0759faef3abcdd082f7bc.png"},function(t,s,i){t.exports=i.p+"images/8f024ee77f0f9bbb1561fb0001277308.png"},function(t,s,i){t.exports=i.p+"images/3d0f2e1a0125c392134f0f8874073860.png"},function(t,s,i){t.exports=i.p+"images/bf1259b1005bdfefce668fcc576fa9ed.png"},function(t,s,i){"use strict";var e=i(54),a=i(30),n=i(46);class o extends e.a{constructor(){super(n.a),this.hsp=0,this.vsp=0,this.animationTimer=8,this.walkFrame=0,this.talking=!1,this.position=[200,320]}react(t){switch(t){case a.a.Left:this.hsp=-6;break;case a.a.Right:this.hsp=3;break;case a.a.Talk:this.talking=!0}}update(){this.hsp||this.vsp?(this.position[0]+=this.hsp,this.position[1]+=this.vsp,Math.floor(--this.animationTimer)||(this.subimage=(this.subimage+1)%4,this.animationTimer+=8),this.scale[0]=Math.sign(this.hsp)||this.scale[0]):(this.subimage=0,this.talking?this.scale[0]=-1:this.scale[0]=1),this.hsp=this.vsp=0}draw(t){n.c.draw(t,this.subimage,Math.sign(this.talking?1:this.scale[0])*(this.position[0]-120)-n.c.dimensions[0]/2,Math.sign(this.scale[1])*this.position[1]-n.c.dimensions[1]/2,n.c.dimensions[0],n.c.dimensions[1],this.talking?1:this.scale[0],this.scale[1]),this.talking=!1,super.draw(t)}}s.a=o},function(t,s,i){"use strict";i(36);var e=i(54),a=(i(30),i(53)),n=i(46);class o extends e.a{constructor(t){super(n.d),this.hsp=0,this.vsp=0,this.animationTimer=8,this.walkFrame=0,this.position=[this.game.width+this.sprite.dimensions[0]/2,320],this.scale=[-1,1]}react(t){t===a.a.Monster&&(this.hsp=-3)}update(){(this.hsp||this.vsp)&&(this.position[0]+=this.hsp,this.position[1]+=this.vsp,Math.floor(--this.animationTimer)||(this.subimage=(this.subimage+1)%4,this.animationTimer+=8))}}s.a=o},function(t,s,i){t.exports=i.p+"images/b848db66bf367ec4bdd32ab059bd2b02.svg"},function(t,s,i){t.exports=i.p+"images/eb268d97713623b576cd9cdf7eb27bf9.svg"},function(t,s,i){t.exports=i.p+"images/605507c961cf5fc51fe6bda42ed0483e.svg"},function(t,s,i){t.exports=i.p+"images/95455e21787e7bae36dbf57e160bbe33.jpg"},function(t,s,i){t.exports=i.p+"images/6cf3fd61573fac3db99dec45650c12c5.jpg"},function(t,s,i){"use strict";var e=i(41),a=(i(44),i(114)),n=i.n(a);const o=new e.a(n.a);s.a=o,s.b=Promise.all([o].map(({loaded:t})=>t))},function(t,s,i){t.exports=i.p+"images/9471fbd02434c21d1f47630b614d24d9.jpg"},function(t,s,i){"use strict";i(30);var e=i(39),a=i(42);s.a=(new e.a).frame(1,[a.d],[]).frame(2,[a.e],[]).frame(7,[a.a],[]).frame(8,[a.f],[]).end(11)},function(t,s,i){"use strict";var e=i(56),a=i(42);class n extends e.a{constructor(t,s){super(t),this.position=s,this.previous=this.position,this.destination=null,this.travelTimer=0}react(t){if(t===this.sprite)switch(this.sprite){case a.d:this.destination=[166,205];break;case a.a:this.destination=[434,210]}}update(){if(this.z=this.y,null!==this.destination){const t=Math.pow(Math.sin(++this.travelTimer*Math.PI/2/90),2),[s,i]=[this.destination[0]-this.previous[0],this.destination[1]-this.previous[1]];this.x=this.previous[0]+s*t,this.y=this.previous[1]+i*t,this.travelTimer>=90&&(this.travelTimer=0,this.previous=this.position,this.destination=null)}}draw(t){t.drawImage(this.sprite.image,...this.position.slice(0,2),50,80)}}s.a=n},function(t,s,i){"use strict";var e=i(56),a=i(42);class n extends e.a{constructor(){super(a.e),this.position=[this.game.width,-this.sprite.dimensions[1],1e4],this.travelTimer=null}react(t){t!==a.f&&t!==a.e||(this.sprite=t,this.position=[this.game.width,-this.sprite.dimensions[1],1e4],this.travelTimer=0)}update(){if(null!==this.travelTimer){let t,s,i;if(++this.travelTimer,this.travelTimer<45)t=[this.game.width,-this.sprite.dimensions[1],1e4],s=[this.game.width/2,this.game.height/2],i=Math.pow(Math.sin(this.travelTimer*Math.PI/2/45),2);else{if(!(this.travelTimer>105&&this.travelTimer<150))return void(this.travelTimer>150&&(this.travelTimer=null));t=[this.game.width/2,this.game.height/2],s=[this.game.width/2,this.game.height+this.sprite.dimensions[1]],i=Math.pow(Math.sin((this.travelTimer-105)*Math.PI/2/45),2)}const[e,a]=[s[0]-t[0],s[1]-t[1]];this.x=t[0]+e*i,this.y=t[1]+a*i}}}s.a=n}]));